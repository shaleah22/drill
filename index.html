November 30 edition
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Drill</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #level { position: absolute; top: 10px; right: 10px; font-size: 30px; font-weight: bold; }
        #question { margin-bottom: 50px; font-size: 80px; }
        #questionContainer { margin-top: 90px; }
        #questionImage { 
            max-width: 400px; 
            max-height: 300px; 
            width: auto; 
            height: auto; 
            display: block; 
            margin: 0 auto; 
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="userInput">
            <h3>Type in your username and press enter to start</h3>
            <input type="text" id="nameInput" placeholder="Enter Name" autofocus>
            <p id="output"></p>
        </div>
        <div id="quiz" style="display: none;">
            <img id="questionImage" style="max-width: 50%; height: auto; margin-bottom: 15px;" src="" alt="Question image" />
            <div id="level">Level: 1</div>
            <div id="question">Question goes here</div>
            <input type="text" id="inputBox" placeholder="Type your answer here" disabled />
            <div id="feedback"></div>
        </div>
    </div>

    <script>
        const questions = [ 
            { question: "-3 - (-9) = ", answer: "6", imageUrl: "https://i.postimg.cc/brP2T39q/3-9.gif" },
            { question: "-9 - 3 = ", answer: "-12", imageUrl: "https://i.postimg.cc/P5H5s0wj/9-3.gif" },
            { question: "3 - 9 = ", answer: "-6", imageUrl: "https://i.postimg.cc/XY11B6SL/3-9.gif" },
            { question: "6(8) = ", answer: "48", imageUrl: "https://i.postimg.cc/9Q064n4k/Screenshot-2024-11-30-at-4-39-51-AM.png" },
            { question: "(-3)(-9) = ", answer: "27", imageUrl: "https://i.postimg.cc/D0jFhsgq/9-times-3.gif" },
            { question: " (-8)(-7) = ", answer: "56", imageUrl: "https://i.postimg.cc/kGbX10T8/8-x-7.gif" },
            { question: " -8 - 7 = ", answer: "-15", imageUrl: "https://i.postimg.cc/j5G9f0H3/8-7.gif" },
            { question: "-3 - (-9) = ", answer: "6", imageUrl: "https://i.postimg.cc/brP2T39q/3-9.gif" },
             { question: " 7 - 8 = ", answer: "-1", imageUrl: "https://i.postimg.cc/RZsJHfQr/7-8.gif" },
            { question: "-6 x 7 = ", answer: "-42", imageUrl: "https://i.postimg.cc/YCpgbLDt/Screenshot-2024-11-28-at-6-51-38-AM.png" },
            { question: "(-4)(7) =  ", answer: "-28", imageUrl: "https://i.postimg.cc/9Q3THqn3/Screenshot-2024-11-28-at-6-50-44-AM.png" },
            { question: "(-4) + 7 =  ", answer: "3", imageUrl: "https://i.postimg.cc/Wpnv8Gc9/negative-4-plus-7.gif" },
            { question: "(-7) + (-4) =  ", answer: "-11", imageUrl: "https://i.postimg.cc/Jzp4gkyL/7-4.gif" },
            { question: "5 x 7 =  ", answer: "35", imageUrl: "https://i.postimg.cc/TYgWR3bZ/Screenshot-2024-11-28-at-6-43-35-AM.png" },
            { question: "-5 + 7 =  ", answer: "-2", imageUrl: "https://i.postimg.cc/Njq5Wjh0/pictures.gif" },
            { question: "7 x 7  = ", answer: "49", imageUrl: "https://i.postimg.cc/G2Kyn7s9/Screenshot-2024-11-28-at-6-43-00-AM.png" },
            { question: "-9(-7) = ", answer: "63", imageUrl: "https://i.postimg.cc/JnsLRtsJ/9-times-7.gif" },
            { question: "- 9 - 7  = ", answer: "-16", imageUrl: "https://i.postimg.cc/cJV8jDhp/9-7.gif" },
            { question: "- 7 - (-9)  = ", answer: "2", imageUrl: "https://i.postimg.cc/FzMZwkXZ/1.gif" },
            { question: "4 x 8  = ", answer: "32", imageUrl: "https://i.postimg.cc/Fzrdz9g4/Screenshot-2024-11-29-at-4-59-46-AM.png" },
            { question: "(4)(-9) = ", answer: "-36", imageUrl: "https://i.postimg.cc/nzFg7kbD/Screenshot-2024-11-29-at-6-39-48-AM.png" },
            { question: "-4 + 9 = ", answer: "5", imageUrl: "https://i.postimg.cc/Wpm527VM/4-9.gif" },
            { question: "6 * 9 = ", answer: "54", imageUrl: "https://i.postimg.cc/Pq8TWBr8/Screenshot-2024-11-29-at-5-02-01-AM.png" },
            { question: "-6 + 9 = ", answer: "3", imageUrl: "https://i.postimg.cc/cHGNFVqp/6-9.gif" },
            { question: "- 9 - 6 = ", answer: "-15", imageUrl: "https://i.postimg.cc/JhB9Mn3s/9-6.gif" },
            { question: "(-8)(9)  = ", answer: "-72", imageUrl: "https://i.postimg.cc/15CK6ddS/Screenshot-2024-11-29-at-5-05-04-AM.png" },
            { question: "(-6)(-8) = ", answer: "48", imageUrl: "https://i.postimg.cc/KYPKxkSz/6-x-8.gif" },
            { question: "-8 + (-3) = ", answer: "-11", imageUrl: "https://i.postimg.cc/76fjtvgD/8-3.gif" },
            { question: "-2 - (-9) =", answer: "7", imageUrl: "https://i.postimg.cc/4NGpBf1v/2-9.gif" },
            { question: "7 - (-4) = ", answer: "11", imageUrl: "https://i.postimg.cc/ZKb4RJ0w/7-4.gif" },
            { question: "-4 - 5  = ", answer: "-9", imageUrl: "https://i.postimg.cc/3rf2LcXx/4-5.gif" },
            { question: "- 7 - 6  = ", answer: "-13", imageUrl: "https://i.postimg.cc/76XPyrRR/7-6.gif" },
            { question: "(- 7)(- 6)  = ", answer: "42", imageUrl: "https://i.postimg.cc/7hPVfqby/7-x-6.gif" },
            { question: "- 8 - 7 = ", answer: "-15", imageUrl: "https://i.postimg.cc/j5G9f0H3/8-7.gif" },
            { question: "- 8 - 5  =", answer: "-13", imageUrl: "https://i.postimg.cc/vmhBzy3B/8-5.gif" },
            { question: "7 - (-5) = ", answer: "12", imageUrl: "https://i.postimg.cc/cLHXZRb4/7-5.gif" },
            { question: "-8 + (-3) = ", answer: "-11", imageUrl: "https://i.postimg.cc/76fjtvgD/8-3.gif" },
             { question: "- 7 - 6  = ", answer: "-13", imageUrl: "https://i.postimg.cc/76XPyrRR/7-6.gif" },
            { question: "- 7 - 7 = ", answer: "-14", imageUrl: "https://i.postimg.cc/mZwjKpgF/7-7.gif" },
            { question: "8 x 6 = ", answer: "48", imageUrl: "https://i.postimg.cc/9Q064n4k/Screenshot-2024-11-30-at-4-39-51-AM.png" },
             { question: "- 7 - 4  = ", answer: "-11", imageUrl: "https://i.postimg.cc/Jzp4gkyL/7-4.gif" },
            { question: "- 8 - 4 = ", answer: "-12", imageUrl: "https://i.postimg.cc/Ghh5h87t/8-4.gif" },
            { question: "- 8 - 6  =", answer: "-14", imageUrl: "https://i.postimg.cc/vZmTzzPy/8-6.gif" },
            { question: "9 - (-8) = ", answer: "17", imageUrl: "https://i.postimg.cc/zX864PZs/9-8.gif" },
             { question: "- 5 - 6  = ", answer: "-11", imageUrl: "https://i.postimg.cc/C5gh3HSc/5-6.gif" },
             { question: "8(6) = ", answer: "48", imageUrl: "https://i.postimg.cc/9Q064n4k/Screenshot-2024-11-30-at-4-39-51-AM.png" },
            { question: "- 5 - 7 = ", answer: "-12", imageUrl: "https://i.postimg.cc/mDrNQM06/5-7.gif" },
            { question: "5 - (-9) = ", answer: "14", imageUrl: "https://i.postimg.cc/tgFgsrqN/5-9.gif" },
            { question: "5 - 7 = ", answer: "-2", imageUrl: "https://i.postimg.cc/h497ZWwg/5-7.gif" },
           { question: " 'at least' is a key phrase for what inequality sign?" , answer: ">=", imageUrl: "" },
            { question: 'Type in the "less than" sign" ', answer: "<", imageUrl: "" },


//new facts

{ question: "6(8) = ", answer: "48", imageUrl: "https://i.postimg.cc/9Q064n4k/Screenshot-2024-11-30-at-4-39-51-AM.png" },
{ question: "-6 + 8 = ", answer: "2", imageUrl: "https://i.postimg.cc/sgcD98K4/6-8.gif" },
{ question: "6 - 8 = ", answer: "-2", imageUrl: "https://i.postimg.cc/KYcqR90W/6-8.gif" },
{ question: "8 - (-6) = ", answer: "14", imageUrl: "https://i.postimg.cc/8cqkCfDy/8-6.gif" },
{ question: "-6 - (-8) = ", answer: "2", imageUrl: "https://i.postimg.cc/zDjnfnLL/6-8.gif" },




/* Add your full list of questions here */ ];

        let currentLevel = 1;
        let currentQuestionIndex = 0;
        let shuffledQuestions = [];
        let timer;
        let answerTimeout;
        const totalTime = 60000; // 60 seconds for the entire drill
        const answerDelay = 7000; // 7 seconds before showing correct answer

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        async function startDrill() {
            const name = document.getElementById("nameInput").value.trim();
            if (!name) {
                document.getElementById("output").textContent = "Please enter a name.";
                return;
            }

            try {
                const response = await fetch(`https://script.google.com/macros/s/AKfycbySL-Nwv6Oa-Nghdxq9LiZBBGYeQPUhXKTar4yFZUTv54PVcHyOdfgtTRR_IDLkOwWd_g/exec?name=${encodeURIComponent(name)}`);
                const data = await response.json();

                if (data.error) {
                    document.getElementById("output").textContent = data.error;
                } else {
                    currentLevel = parseInt(data.level);
                    shuffledQuestions = shuffleQuestionsForLevel(currentLevel);
                    document.getElementById("output").textContent = "";
                    document.getElementById("userInput").style.display = "none";
                    document.getElementById("quiz").style.display = "block";
                    document.getElementById("level").textContent = `Level: ${currentLevel}`;
                    document.getElementById("inputBox").disabled = false; // Enable input box
                    loadQuestion();
                    startTimer(); // Start the overall drill timer
                }
            } catch (error) {
                document.getElementById("output").textContent = "An error occurred while retrieving the level.";
                console.error(error);
            }
        }

        function shuffleQuestionsForLevel(level) {
            const start = level - 1;
            const end = start + 10; // Adjust the range for the level
            return shuffle(questions.slice(start, end));
        }

        function startTimer() {
            timer = setTimeout(() => {
                alert("Time is up! Submitting your progress.");
                submitDetails();
                endDrill(); // End the drill completely
            }, totalTime);
        }

        function loadQuestion() {
            const question = shuffledQuestions[currentQuestionIndex];
            document.getElementById('question').innerHTML = question.question;
            if (question.imageUrl) {
                document.getElementById('questionImage').src = question.imageUrl;
                document.getElementById('questionImage').style.display = "block";
            } else {
                document.getElementById('questionImage').style.display = "none";
            }
            setAnswerTimeout(question.answer); // Set timeout to show the correct answer
            focusInput(); // Automatically focus input box
        }

        function setAnswerTimeout(correctAnswer) {
            clearTimeout(answerTimeout);
            answerTimeout = setTimeout(() => {
                alert(`The correct answer was: "${correctAnswer}". Please try again.`);
                document.getElementById("feedback").textContent = "Retry with the correct answer.";
            }, answerDelay);
        }

        function checkAnswer() {
            const inputBox = document.getElementById('inputBox');
            const userAnswer = inputBox.value.trim().toLowerCase();
            const correctAnswer = shuffledQuestions[currentQuestionIndex].answer.toLowerCase();

            if (userAnswer === correctAnswer) {
                document.getElementById('feedback').textContent = "Correct!";
                inputBox.value = ""; // Clear input
                clearTimeout(answerTimeout); // Cancel timeout if correct
                moveToNextQuestion();
            } else {
                document.getElementById('feedback').textContent = "Incorrect. Try again!";
            }
        }

        function moveToNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= shuffledQuestions.length) {
                currentQuestionIndex = 0;
                currentLevel++;
                shuffledQuestions = shuffleQuestionsForLevel(currentLevel);
                document.getElementById("level").textContent = `Level: ${currentLevel}`;
            }
            loadQuestion();
        }

        function focusInput() {
            const inputBox = document.getElementById('inputBox');
            inputBox.focus(); // Automatically focus on the input box
        }

        function submitDetails() {
            clearTimeout(timer);
            const formData = {
                name: document.getElementById("nameInput").value.trim(),
                level: currentLevel
            };

            fetch('https://script.google.com/macros/s/AKfycbzWoE2NrNffSm_AZdAe1sykhKAVelPYaY4rO9GnoBTDvTPAXqPB9gv0-00PvQ16D_kJ/exec', {
                method: 'POST',
                mode: 'no-cors',
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            })
            .then(() => alert('Progress submitted successfully!'))
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while submitting progress.');
            });
        }

        function endDrill() {
            document.getElementById("quiz").style.display = "none";
            document.getElementById("output").textContent = "Drill ended. Thank you for participating!";
        }

        document.getElementById('inputBox').addEventListener('input', checkAnswer);

        document.getElementById("nameInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                startDrill();
            }
        });
    </script>
</body>
</html>
